<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>AdminLTE 3 | Fixed Sidebar</title>

		<!-- Google Font: Source Sans Pro -->
		<link rel="stylesheet"
			href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
		<!-- Font Awesome -->
		<link rel="stylesheet" href="../../static/plugins/fontawesome-free/css/all.min.css">
		<!-- overlayScrollbars -->
		<link rel="stylesheet" href="../../static/plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
		<!-- Theme style -->
		<link rel="stylesheet" href="../../static/dist/css/adminlte.min.css">
		 <!-- SweetAlert2 -->
		 <link rel="stylesheet" href="../../static/plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css">
		 <!-- Toastr -->
		 <link rel="stylesheet" href="../../static/plugins/toastr/toastr.min.css">
	</head>
	<body class="hold-transition sidebar-mini layout-fixed">
		<!-- Site wrapper -->
		<div class="wrapper">

			<!-- Content Wrapper. Contains page content -->
			<div class="content-wrapper">
				<!-- Content Header (Page header) -->
				<section class="content-header">
					<div class="container-fluid">
						<div class="row mb-2">
							<div class="col-sm-6">
								<h1>修改当前用户的登录密码</h1>
							</div>
							<div class="col-sm-6">
								<ol class="breadcrumb float-sm-right">
									<li class="breadcrumb-item"><a href="" onclick="loadFrameContent('/u/main');">Home</a></li>
									<!-- <li class="breadcrumb-item"><a href="#">Layout</a></li> -->
									<li class="breadcrumb-item active">选项</li>
									<li class="breadcrumb-item active">修改当前用户的登录密码</li>
								</ol>
							</div>
						</div>
					</div><!-- /.container-fluid -->
				</section>

				<!-- Main content -->
				<section class="content">


					<div class="container-fluid">
						<!--        <div class="row">-->
							<div class="row">
								<div class="col-md-12">
									<div id="help1" class="card card-success card-outline">
										<div class="card-header">
											<h3 class="card-title">修改当前用户的登录密码</h3>
										</div>
										<div class="card-body">
											<form id="form1" class="layui-form layui-form-pane" action="/u/doChangePwd" method="POST">
											  <div class="layui-form-item">
											    <label class="layui-form-label">新密码</label>
											    <div class="layui-input-block col-md-4">
											      <input type="password" name="passWord" lay-verify="required" placeholder="请输入新的密码" autocomplete="off" class="layui-input">
											    </div>
											  </div>
											  <div class="layui-form-item">
											    <label class="layui-form-label">确认密码</label>
											    <div class="layui-input-block col-md-4">
											      <input type="password" name="passWord2" lay-verify="required" placeholder="请再次输入新的密码" autocomplete="off" class="layui-input">
											    </div>
											  </div>
											
											<!--  <div class="layui-form-item">
											    <div class="layui-input-block"> -->
											      <button class="btn btn-outline-info swalDefaultSuccess" lay-submit="" lay-filter="pwd">修改密码</button>
													
												<!-- </div>
											  </div> -->
											
											</form>
											
											
										</div>

									</div>
								</div>
							</div>
						</div>
					</div>
			</div>
		</div>
		</section>
		<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->

		<footer class="main-footer">
			<div class="float-right d-none d-sm-block">
				<b>Version</b> 1.0
			</div>

		</footer>

		<!-- Control Sidebar -->
		<aside class="control-sidebar control-sidebar-dark">
			<!-- Control sidebar content goes here -->
		</aside>
		<!-- /.control-sidebar -->
		</div>
		<!-- ./wrapper -->

		<!-- jQuery -->
		<script src="../../static/plugins/jquery/jquery.min.js"></script>
		<!-- Bootstrap 4 -->
		<script src="../../static/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
		<!-- overlayScrollbars -->
		<script src="../../static/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
		<!-- AdminLTE App -->
		<script src="../../static/dist/js/adminlte.min.js"></script>
		<!-- SweetAlert2 -->
		<script src="../../static/plugins/sweetalert2/sweetalert2.min.js"></script>
		<!-- Toastr -->
		<script src="../../static/plugins/toastr/toastr.min.js"></script>
		<!-- Page specific script -->


		<script type="text/javascript">
		  $(function() {
		    var Toast = Swal.mixin({
		      toast: true,
		      position: 'top-end',
		      showConfirmButton: false,
		      timer: 3000
		    });
		  
		  
			$(document).ready(function () {
			
			  layui.use(["form", "element"], function () {
			    var form = layui.form;
			
			    form.on('submit(pwd)', function(data){
			      
			      submitForm();
			      loadFrameContent('/u/changePwd');
			      return false;
			    });
			
			  });
			
			});
			
			function submitForm() {
			  var postData = $("#form1").serializeArray();
			  $.post($("#form1").attr("action"), postData, function (json) {
			    //var data = $.parseJSON(json);
			    if (json.Code == 0) {
			      //成功
				  Toast.fire({
				    icon: 'success',
				    title: '修改成功'
				  })
			      // layer.alert("修改成功");
			    } else {
			      //
				Toast.fire({
				  icon: 'error',
				  title: '修改失败',
				  text: '两次输入的密码不一致'
				})
			      // layer.alert("失败了：" + json.Msg, { icon: 2 });
			    }
			  }, "json");
			}
			  
			});
			
			
		</script>


	</body>
</html>
