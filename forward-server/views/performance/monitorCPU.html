<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>AdminLTE 3 | UI Sliders</title>

		<!-- Google Font: Source Sans Pro -->
		<link rel="stylesheet"
			href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
		<!-- Font Awesome -->
		<link rel="stylesheet" href="../../static/plugins/fontawesome-free/css/all.min.css">
		<!-- Ion Slider -->
		<link rel="stylesheet" href="../../static/plugins/ion-rangeslider/css/ion.rangeSlider.min.css">
		<!-- bootstrap slider -->
		<link rel="stylesheet" href="../../static/plugins/bootstrap-slider/css/bootstrap-slider.min.css">
		<!-- Theme style -->
		<link rel="stylesheet" href="../../static/dist/css/adminlte.min.css">
		<!-- Google Font: Source Sans Pro -->
		<link rel="stylesheet"
			href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
		<!-- Font Awesome -->
		<link rel="stylesheet" href="../../static/plugins/fontawesome-free/css/all.min.css">
		<!-- overlayScrollbars -->
		<link rel="stylesheet" href="../../static/plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
		<!-- Theme style -->
		<link rel="stylesheet" href="../../static/dist/css/adminlte.min.css">
		<!-- SweetAlert2 -->
		<link rel="stylesheet" href="../../static/plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css">
		<!-- Toastr -->
		<link rel="stylesheet" href="../../static/plugins/toastr/toastr.min.css">

		<!-- 倒计时 -->

		<link rel="stylesheet" type="text/css" href="../../static/css/default.css">

		<script src="../../static/js/jquery.mins.js"></script>
		<script src="../../static/js/jquery.knob.js"></script>
		<script src="../../static/js/jquery.throttle.js"></script>
		<script src="../../static/js/jquery.classycountdown.js"></script>

		<link rel="stylesheet" type="text/css" href="../../static/css/jquery.classycountdown.css" />
		<style>
			.ClassyCountdownDemo {
				margin: 0 auto 0px calc(39.5%);
				/* margin:0 auto; */
				max-width: 800px;
				width: calc(100%);
				padding: 30px;
				display: block
			}

			#countdown2 {
				/* background: #FFF */
			}
		</style>
	</head>
	<body class="hold-transition sidebar-mini">
		<!-- 倒计时 -->
		<!-- <div id="countdown2" class="ClassyCountdownDemo"></div> -->
		<div class="wrapper">
			<!-- Content Wrapper. Contains page content -->
			<div class="content-wrapper">
				<!-- Content Header (Page header) -->
				<section class="content-header">
					<div class="container-fluid">
						<div class="row mb-2">
							<div class="col-sm-6">
								<h1>监控CPU调用信息</h1>
							</div>
							<div class="col-sm-6">
								<ol class="breadcrumb float-sm-right">
									<li class="breadcrumb-item"><a href="#">Home</a></li>
									<li class="breadcrumb-item active">Sliders</li>
								</ol>
							</div>
						</div>
					</div>
				</section>


				<section class="content">
					<div class="container-fluid">
						<div class="row">
							<div class="col-12">
								<div class="card card-danger card-outline">
									<div class="card-header">
										<h3 class="card-title">Ion Slider</h3>
									</div>
									<!-- /.card-header -->
									<div class="card-body">
										<form id="form1" action="/performance/domonitorcpu" method="post">
											<div class="col-sm-12">
												<label for="range_5">设置CPU监控时长</label>
												<input id="range_5" type="text" name="sec" value="10">
												<small class="form-text text-muted"><i class="fa fa-exclamation-circle"
														style="color:orangered;"></i>
													注意：在该时间段内本页面将停止响应，请在新标签页内进行压力测试</small>
											</div>
										</form>
									</div>

									<!-- 倒计时 -->
									<div id="countdown2" class="ClassyCountdownDemo"></div>

									<!-- /.card-body -->
									<div class="card-footer">
										<div class="d-grid gap-2 col-2 mx-auto">
											<button class="btn btn-danger" type="button"
												onclick="submit()">开始执行CPU监控</button>
										</div>
									</div>
								</div>
								<!-- /.card -->
							</div>
							<!-- /.col -->
						</div>

						<div class="row">
							<div class="col-12">
								<div class="card card-danger card-outline">
									<div class="card-header">
										<h3 class="card-title">Ion Slider</h3>
									</div>

									<div class="card-body">
										<p>Filename:</p>
										<p>
										<pre>123</pre>
										</p>
										<div class="d-grid gap-2">
											<button class="btn btn-dark" type="button" onclick="pprof()">Pprof Web
												Analysis</button>
										</div>
									</div>

									<div class="card-footer">
										<div class="d-grid gap-2 col-2 mx-auto">
										</div>
									</div>
								</div>
							</div>
						</div>

					</div>
				</section>
			</div>
			<!-- /.content-wrapper -->



			<footer class="main-footer">
				<div class="float-right d-none d-sm-block">
					<b>Version</b> 3.2.0
				</div>
				<strong>Copyright &copy; 2014-2021 <a href="https://adminlte.io">AdminLTE.io</a>.</strong> All rights
				reserved.
			</footer>

			<aside class="control-sidebar control-sidebar-dark">
			</aside>
			<!-- /.control-sidebar -->
		</div>
		<!-- ./wrapper -->

		<!-- jQuery -->
		<!-- <script src="../../static/plugins/jquery/jquery.min.js"></script> -->
		<!-- Bootstrap 4 -->
		<script src="../../static/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
		<!-- AdminLTE App -->
		<script src="../../static/dist/js/adminlte.min.js"></script>
		<!-- Ion Slider -->
		<script src="../../static/plugins/ion-rangeslider/js/ion.rangeSlider.min.js"></script>
		<!-- Bootstrap slider -->
		<script src="../../static/plugins/bootstrap-slider/bootstrap-slider.min.js"></script>
		<!-- SweetAlert2 -->
		<script src="../../static/plugins/sweetalert2/sweetalert2.min.js"></script>
		<!-- Toastr -->
		<script src="../../static/plugins/toastr/toastr.min.js"></script>
		<!-- Page specific script -->
		<script>
			// 倒计时
			var nows;

			function submit() {
				$("#modal-default").modal('hide');

				var Toast = Swal.mixin({
					toast: true,
					position: 'top-end',
					showConfirmButton: false,
					timer: 3000,
				});

				var postData = $("#form1").serializeArray();

				// 倒计时
				nows = document.getElementById("range_5").value
				nows = Math.round(nows);
				// document.getElementById("style2").style.display = "";
				// document.getElementById("countdown2").removeAttribute('style');

				$.post($("#form1").attr("action"), postData, function(json) {
					//var data = $.parseJSON(json);
					if (json.Code == 0) {
						refreshGrid();
						// loadFrameContent('/performance/monitorcpu');
						Toast.fire({
							icon: 'success',
							title: json.Msg,
							text: json.Filename
						})
						nows = 0;
						// document.getElementById("countdown2").style.display="none";
					} else {
						refreshGrid();
						// loadFrameContent('/performance/monitorcpu');
						Toast.fire({
							icon: 'error',
							title: json.Msg,
							text: json.Filename
						})
					}
				}, "json");

				loadFrameContent('/performance/monitorcpu');
			}

			function pprof() {
				$.get("/performance/pprof", {
					operate: "start"
				});
			}

			$(function() {
				/* BOOTSTRAP SLIDER */
				$('.slider').bootstrapSlider()

				/* ION SLIDER */

				$('#range_5').ionRangeSlider({
					min: 0,
					max: 60,
					type: 'single',
					step: 0.01,
					postfix: ' second(s)',
					prettify: true,
					hasGrid: true
				})
				// $('#range_6').ionRangeSlider({
				//     min     : -50,
				//     max     : 50,
				//     from    : 0,
				//     type    : 'single',
				//     step    : 1,
				//     postfix : '°',
				//     prettify: false,
				//     hasGrid : true
				// })

				// $('#range_4').ionRangeSlider({
				//     type      : 'single',
				//     step      : 100,
				//     postfix   : ' light years',
				//     from      : 55000,
				//     hideMinMax: true,
				//     hideFromTo: false
				// })
				// $('#range_3').ionRangeSlider({
				//     type    : 'double',
				//     postfix : ' miles',
				//     step    : 10000,
				//     from    : 25000000,
				//     to      : 35000000,
				//     onChange: function (obj) {
				//         var t = ''
				//         for (var prop in obj) {
				//             t += prop + ': ' + obj[prop] + '\r\n'
				//         }
				//         $('#result').html(t)
				//     },
				//     onLoad  : function (obj) {
				//         //
				//     }
				// })
			})

			// 倒计时
			// var nows = 5;
			// $(document).ready(function() {
			$('#countdown2').ClassyCountdown({
				// end: '10',
				end: nows,
				now: '0',
				labels: true,
				style: {
					element: "",
					textResponsive: .5,
					seconds: {
						gauge: {
							thickness: .01,
							bgColor: "rgba(0,0,0,0.05)",
							fgColor: "#f39c12"
						},
						textCSS: 'font-family:\'Open Sans\'; font-size:25px; font-weight:300; color:#34495e;'
					}

				},
				onEndCallback: function() {
					console.log("Time out!");
				}
			});
			// });
		</script>
	</body>
</html>
